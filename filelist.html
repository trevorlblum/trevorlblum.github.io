
<!DOCTYPE html>
<html>

<head>
  <title>File Listing Table</title>
</head>

<body>
  <table>
    <thead>
      <tr>
        <th>File Name</th>
        <th>File Size (bytes)</th>
        <th>Last Modified</th>
      </tr>
    </thead>
    <tbody id="fileTableBody"></tbody>
  </table>
  <script>
    const directoryPath = 'https://trevorblum.name/age/';
    const fileTableBody = document.getElementById('fileTableBody');

    fetchFileList(directoryPath)
      .then((files) => populateFileTable(files))
      .catch((error) => console.error('Error fetching file list:', error));

    function fetchFileList(path) {
      return new Promise((resolve, reject) => {
        fetch(`/api/listFiles?path=${encodeURIComponent(path)}`)
          .then((response) => response.json())
          .then((data) => resolve(data.files))
          .catch((error) => reject(error));
      });
    }

    function populateFileTable(files) {
      for (const file of files) {
        const row = document.createElement('tr');
        const nameCell = document.createElement('td');
        const sizeCell = document.createElement('td');
        const modifiedCell = document.createElement('td');

        nameCell.textContent = file.name;
        sizeCell.textContent = file.size;
        modifiedCell.textContent = new Date(file.lastModified).toLocaleString();

        row.appendChild(nameCell);
        row.appendChild(sizeCell);
        row.appendChild(modifiedCell);

        fileTableBody.appendChild(row);
      }
    }
  </script>
</body>

</html>